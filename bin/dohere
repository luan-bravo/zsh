#!/usr/bin/env zsh
# Make aliases cleaner by passing a '.' to a command if there are no other args

declare cmd="$1"
shift

if [[ -z "$cmd" ]]; then
	echo "[dohere] ERROR: No arguments passed"
	echo
	echo "DOHERE"
	echo "\tMake aliases cleaner by adding a '.' in case no arguments are passed"
	echo
	echo "\tUSAGE"
	echo "dohere <command> [args...]"
	echo
	echo "\tIf no [arguments] are provided, the <command> is ran as '<command> \$toplevel' if in a repo, or as '<command> .'"
	echo "\tElse, the [arguments] get passed down and the <command> executed as usual"

	exit 1
fi

if (( $#args == 0 )); then
	"$cmd" "$@"
else
	"$cmd" "."
fi
