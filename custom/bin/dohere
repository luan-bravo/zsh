#!/usr/bin/env zsh
if [[ "$#" -eq 0 ]]; then
    echo "[dohere] USAGE: dohere <command> [args]"
    echo "[dohere] if no arguments are provided, the command is ran as \`<command> \$(pwd)\`"
    return
fi

local cmd="$@"
for arg in $cmd; do
    if [[ -e "${arg}" ]]; then
        echo "[dohere] found valid path '${arg}' in args"
        "$@"
        return
    fi
done

if [[ "$1" = "git" ]]; then
    set -- "$@" "$(git rev-parse --show-toplevel || echo '.')"
    $@ $(git rev-parse --show-toplevel)
    return

else
    set -- "$@" "."
    return
fi
echo "[dohere] cmd: '${cmd}'"
